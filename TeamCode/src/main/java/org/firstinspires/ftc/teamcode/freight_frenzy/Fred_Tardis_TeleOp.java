package org.firstinspires.ftc.teamcode.freight_frenzy;

import com.qualcomm.robotcore.eventloop.opmode.TeleOp;
import com.qualcomm.robotcore.util.ElapsedTime;
import com.qualcomm.robotcore.util.Range;

@TeleOp(name = "Fred_Tardis_TeleOp", group = "Linear Opmode")

public class Fred_Tardis_TeleOp extends BaseClass_FF {    // LinearOpMode {

    private ElapsedTime runtime = new ElapsedTime();

    @Override
    public void runOpMode() {

        // Initialize the hardware variables. Note that the strings used here as parameters
        // to 'get' must correspond to the names assigned during the robot configuration
        // step (using the FTC Robot Controller app on the phone).

        defineComponentsFred();
        double powerMultiplier = 0.6;
        boolean previousBState = false;
        boolean previousRightBumperState = false;
        boolean previousX2State = false;
        boolean grippingCapstone = false;
        boolean motorPowerFast = false;
        boolean intaking = false;
        boolean wirelessConnected = true;
        double sVPosition = sV.getPosition();
//        double sCUPosition = sCU.getPosition();
        //used later to determine intake and outtake points for the arm
        double armLevelReading = mU.getCurrentPosition();
        double extensionPosition = mE.getCurrentPosition();
        double armLimitOffset = 0;
        
//        //arm automation presets

        //11-26-21 DO NOT DELETE
//        double intakeUpright = 3.25;
//        double outtakeUpright = 0.4;
//        double intakeWrist = 0.5;
//        double outtakeWrist = 0.28;
//        double intakeExtension = 50;
//        double outtakeExtension = 400;

        //11-27-21 outtake not far and high enough from robot
//        double intakeUpright = 3.1;
//        double outtakeUpright = 0.6;
//        double intakeWrist = 0.58;
//        double outtakeWrist = 0.28;
//        double intakeExtension = 10;
//        double outtakeExtension = 200;

        //11-27-21 intaking farther away and pulling elements in more efficient
//        double intakeUpright = 3.1;
//        double outtakeUpright = 0.46;
//        double intakeWrist = 0.58;
//        double outtakeWrist = 0.28;
//        double intakeExtension = 10;
//        double outtakeExtension = 600;

        //11-27-21 Values reset?
//        double intakeUpright = 2.06;
//        double outtakeUpright = 0.46;
//        double intakeWrist = 1.00;
//        double outtakeWrist = 0.28;
//        double intakeExtension = 600                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         ;
//        double outtakeExtension = 600;

        //11-30-21
        double intakeUpright = 2.00;
        double outtakeUpright = 0.71;
        double intakeWrist = 0.50;
        double outtakeWrist = 0.88;
        double intakeExtension = 400                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         ;
        double outtakeExtension = 500;


        telemetry.addData("Status", "Initialized");
        telemetry.update();

        waitForStart();

        while (opModeIsActive()) {
            updatePoseStrafe();
            gyroUpdate();

            //Gamepad 1 Variables
            // waitForStart();
            runtime.reset();

            double leftY1 = gamepad1.left_stick_y * powerMultiplier;//drive forward
            double rightX1 = -(gamepad1.right_stick_x) * powerMultiplier;//drive rotate
            double leftX1 = -(gamepad1.left_stick_x) * powerMultiplier;//drive strafe
            double rightY1 = -(gamepad1.right_stick_y);//free
            double rightTrigger = (gamepad1.right_trigger);//capstone arm
            double leftTrigger = (gamepad1.left_trigger);//capstone arm
            boolean rightBumper = (gamepad1.right_bumper);//capstone gripper
            boolean xButton = (gamepad1.x);//reverse spinner direction
            boolean bButton = (gamepad1.b);//turbo drive
            boolean yButton = (gamepad1.y);//intake reverse
            boolean aButton = (gamepad1.a);//spinner

            //Gamepad 2 Variables
            double rightTrigger2 = (gamepad2.right_trigger);//wrist up
            double rightY2 = (gamepad2.right_stick_y);//arm angle
            double leftY2 = (gamepad2.left_stick_y);//arm extend
            double leftTrigger2 = (gamepad2.left_trigger);//wrist down
            boolean leftBumper2 = (gamepad2.left_bumper);//free
            boolean rightBumper2 = (gamepad2.right_bumper);//free
            boolean bButton2 = (gamepad2.b);//sets arm for intake
            boolean aButton2 = (gamepad2.a);//sets arm for outtake
            boolean yButton2 = (gamepad2.y);//sets wrist for intake
            boolean xButton2 = (gamepad2.x);//sets wrist for outtake

            telemetry.addData("prevRBumper", previousRightBumperState);
//            telemetry.addData("capstone gripper servo", sCG.getPosition());
            telemetry.addData("LeftY1 position", leftY1);
            telemetry.addData("LeftX1 position", leftX1);
            telemetry.addData("RightX1 position", rightX1);
            telemetry.addData("gyro", "" + String.format("%.2f deg", gyroZ));
            telemetry.addData("Motor power fast", motorPowerFast);
            telemetry.addData("Wireless connection connected", wirelessConnected );
            telemetry.addData("Left Bumper 2", leftBumper2);
            telemetry.addData("Right Bumper 2", rightBumper2);
            telemetry.addData("aButton is pressed", aButton);
            telemetry.addData("Wrist angle", sVPosition);
            telemetry.addData("Arm angle", mU.getCurrentPosition());
            telemetry.addData("potentiometer voltage", potentiometer.getVoltage());
            telemetry.addData("extension position", mE.getCurrentPosition());
            telemetry.addData("arm limit", lAB.isPressed());
            telemetry.addData("arm limit offset", armLimitOffset);
//            telemetry.addData("tiny arm", sCUPosition);
            telemetry.update();

            //drives robot
            drive(leftY1, leftX1, rightX1);

            //sets arm extension and arm upright motion
            mE.setPower(-leftY2*0.65); //also works for mF on Toby bot
            mU.setPower(rightY2/2);

            //changes drive speed
            if (bButton != previousBState && bButton) {
                if (motorPowerFast) {
                    motorPowerFast = false;
                    powerMultiplier = 1;
                } else {
                    motorPowerFast = true;
                    powerMultiplier = 0.5;
                }
            }

            //controls wrist up-down motion
            if ((rightBumper2)) {//&& (sWVPosition < 1))
                sVPosition += .01;
            } else if ((leftBumper2)) { //&& (sWVPosition > 0))
                sVPosition -= .01;
            }
            sV.setPosition(Range.clip(sVPosition, 0.01, 1));
            sVPosition = sV.getPosition();

            //sets arm limit based on limit switch
            if(!bButton2 && !aButton2){
                if(lAB.isPressed()){
                    armLimitOffset = mE.getCurrentPosition();
                }
            }

            if(aButton2) {
                //moves arm to intake position
                double toleranceU = 0.07;
                double toleranceE = 10;

                if(armLimitOffset != 0){
                    if ((mE.getCurrentPosition() - armLimitOffset - intakeExtension) >= toleranceE) {
                        mE.setPower(-scaleShift((mE.getCurrentPosition() - armLimitOffset - intakeExtension), 0, 600, 1, 0, 1) - 0.2);//-1
                    } else if ((mE.getCurrentPosition() - armLimitOffset - intakeExtension) < toleranceE) {
                        mE.setPower(-scaleShift((mE.getCurrentPosition() - armLimitOffset - intakeExtension), 0, 600, 1, 0, 1));//1
                    } else {
                        mE.setPower(0);
                    }
                }else {
                    mE.setPower(-0.5);
                    if(lAB.isPressed()){
                        armLimitOffset = mE.getCurrentPosition();
                    }
                }

                if ((potentiometer.getVoltage() - intakeUpright) >= toleranceU) {
                    mU.setPower(-scaleShift((potentiometer.getVoltage() - intakeUpright), 0.3, 4, 1, 0, 4)-0.4);
                    telemetry.addData("intakenegative", (((((potentiometer.getVoltage() - intakeUpright) - 0) * (1 - 0)) / (4 - 0)) + 0));

                } else if ((potentiometer.getVoltage() - intakeUpright) < toleranceU) {
                    mU.setPower(-1+scaleShift((potentiometer.getVoltage() - intakeUpright), 0, 4, 0, 1, 8)+0.4);
                    telemetry.addData("intakepositive", (-1+scaleShift((potentiometer.getVoltage() - intakeUpright), 0, 4, 0, 1, 8)+0.4));
                }else{
                    mU.setPower(0);
                }

                sVPosition = intakeWrist;

            }

            if(bButton2) {
                //moves arm to outtake position
                double toleranceU = 0.07;
                double toleranceE = 10;

                if(armLimitOffset != 0) {
                    if(Math.abs(potentiometer.getVoltage() - outtakeUpright) < 0.5) { //prevent upright motor from being overstressed
                        if ((mE.getCurrentPosition() - armLimitOffset - outtakeExtension) >= toleranceE) {
                            mE.setPower(-scaleShift((mE.getCurrentPosition() - armLimitOffset - outtakeExtension), 0, 600, 1, 0, 1) - 0.2);//-1
                            telemetry.addData("-mE", scaleShift((mE.getCurrentPosition() - armLimitOffset - outtakeExtension), 0, 600, 1, 0, 1) + 0.2);
                        } else if ((mE.getCurrentPosition() - armLimitOffset - outtakeExtension) < toleranceE) {
                            mE.setPower(-scaleShift((mE.getCurrentPosition() - armLimitOffset - outtakeExtension), 0, 600, 1, 0, 1));//1
                            telemetry.addData("+mE", scaleShift((mE.getCurrentPosition() - armLimitOffset - outtakeExtension), 0, 600, 1, 0, 1) + 0.2);
                        } else {
                            mE.setPower(0);
                        }
                    }
                } else {
                    mE.setPower(-0.5);
                    if(lAB.isPressed()){
                        armLimitOffset = mE.getCurrentPosition();
                    }
                }

                if ((potentiometer.getVoltage() - outtakeUpright) >= toleranceU) {
                    mU.setPower(-scaleShift((potentiometer.getVoltage() - outtakeUpright), 0.3, 4, 1, 0, 4)-0.4);
                    telemetry.addData("outtakenegative", (((((potentiometer.getVoltage() - outtakeUpright) - 0) * (1 - 0)) / (4 - 0)) + 0));

                } else if ((potentiometer.getVoltage() - outtakeUpright) < toleranceU) {
                    mU.setPower(-1+scaleShift((potentiometer.getVoltage() - outtakeUpright), 0, 4, 0, 1, 8)+0.4);
                    telemetry.addData("outtakepositive", (-1+scaleShift((potentiometer.getVoltage() - outtakeUpright), 0, 4, 0, 1, 8)+0.4));
                }else{
                    mU.setPower(0);


                }

                sVPosition = outtakeWrist;
            }


            //controls capstone angle
//            if ((rightTrigger >= 0.99)) {//&& (sWVPosition < 1))
//                sCUPosition += .008;
//            } else if ((leftTrigger >= 0.99)) { //&& (sWVPosition > 0))
//                sCUPosition -= .008;
//            }
//            sCU.setPosition(Range.clip(sCUPosition, 0, 1));
//            sCUPosition = sCU.getPosition();

            //gripper for capstone
//            if (rightBumper != previousRightBumperState && rightBumper) {
//                if (grippingCapstone) {
//                    grippingCapstone = false;
//                    sCG.setPosition(1);
//                } else {
//                    grippingCapstone = true;
//                    sCG.setPosition(0);
//                }
//            }

            //controls intake
            if (leftTrigger2  >= 0.99) {
                //sucks elements in
                // sI.setPower(-0.5);
                crsIL.setPower(-0.5);
                crsIR.setPower(0.5);
            } else if (rightTrigger2 >= 0.99) {
                //spits elements out
                // sI.setPower(0.5);
                crsIL.setPower(0.5);
                crsIR.setPower(-0.5);
            } else if (rightTrigger2 <= 0.01 && leftTrigger2 <= 0.01) {
                //if both buttons are not pressed, power is off
                // sI.setPower(0);
                crsIL.setPower(0);
                crsIR.setPower(0);
            }

            /*if (xButton2 && !yButton2) {
                //sucks elements in
                // sI.setPower(-0.5);
                crsIL.setPower(-0.5);
                crsIR.setPower(0.5);
            } else if (yButton2 && !xButton2) {
                //spits elements out
                // sI.setPower(0.5);
                crsIL.setPower(0.5);
                crsIR.setPower(-0.5);
            } else if (!xButton2 && !yButton2) {
                //if both buttons are not pressed, power is off
                // sI.setPower(0);
                crsIL.setPower(0);
                crsIR.setPower(0);
            }*/
            //old toggle code
            /*if (xButton2 != previousX2State && xButton2) {
                if (intaking) {
                    intaking = false;
                    sI.setPower(0.5);
                } else {
                    intaking = true;
                    sI.setPower(-0.5);
                }
            }*/

            /*if(yButton && !xButton){
                //spinner for carousel
                sSR.setPower(-1);
                sSL.setPower(1);
            } else if(xButton && !yButton){
                sSL.setPower(-1);
                sSR.setPower(1);
            }else{
                sSL.setPower(0);
                sSR.setPower(0);
            }*/
            //spinner for carousel
            if(leftTrigger <= -0.99){
                sSL.setPower(1);
                telemetry.addData("left", leftTrigger);
                sSR.setPower(-1);
            } else if(rightTrigger >= 0.99){
                sSL.setPower(-1);
                telemetry.addData("right", rightTrigger);
                sSR.setPower(1);
            }else if(rightTrigger <= 0.01 && leftTrigger <= 0.01) {
                telemetry.addData("none", rightTrigger + leftTrigger);
                sSL.setPower(0);
                sSR.setPower(0);
            }

                previousRightBumperState = rightBumper;
            previousBState = bButton;
            previousX2State = xButton2;
            extensionPosition = mE.getCurrentPosition();
        }


        }


    }
